<h1>My Friend's Entries</h1>


<div class="header-actions">
  <%=  link_to 'My entries', entries_path , class: 'new-entry-button' %>
  <%=  link_to 'Dashboard', dashboard_index_path , class: 'new-entry-button' %>

</div>

<div class="entries-container">
  <% @entries.each do |entry| %>
    <div class="entry-card">
      <h3><% if entry.user.profile_picture.attached? %>
        <%= image_tag url_for(entry.user.profile_picture), width: 50, height: 50, 
        alt:"#{entry.user.username}",
        class: "friend-profile-picture"  %>
        <% end %> <%= entry.user.username %></h3>
      <p><strong>Entry:</strong> <%= entry.text.truncate(50) %></p>

      <div class="entry-actions">
        <%= form_with model: Reaction.new, url: reactions_path, local: true do |form| %>
          <%= form.hidden_field :entry_id, value: entry.id %>
          <%= form.text_area :emote, placeholder: "Add your reaction", class: 'reaction-input' %>
          <%= form.submit "React", class: 'action-button react-button' %>
        <% end %>
      </div>

      <div class="entry-reactions">
        <% entry.reactions.each do |reaction| %>
          <p><strong><%= reaction.user.email %>:</strong> <%= reaction.emote %></p>
        <% end %>
      </div>

       <%= link_to 'Comment', new_entry_comment_path(entry), class: "btn btn-primary btn-sm" %>

      <div class="entry-comments" >
       <% entry.comments.each do |comment| %>
        <p>
         <strong><%= comment.user.username %>: </strong>
          <%= comment.text %> 
          <span>
          <% if comment.user == current_user %>
           <%= link_to entry_comment_path(entry, comment), class: "btn btn-primary btn-sm" do %>
            <i class="bi bi-eye"></i> 
          <% end %>
          </span>
          <span>
           <%= button_to entry_comment_path(entry, comment), method: :delete, class: "btn btn-danger btn-sm" do%>
             <i class="bi bi-trash"></i> 
           </span><% end %>
        </p>
        <% end %>
        <% end %>
       </div>
      
    </div>
    <%end%>
</div>
